{% extends 'base_template.html.twig' %}
{% block title %}Inscription -
	{{ constant('WEBSITE_TITLE')}}
{% endblock %}

{% block content %}
<a href="javascript:history.back()" class="btn btn-primary mt-2 ms-2 ilFautPatienter">Retour</a>

	{% if message is defined %}
		<div class="alert alert-danger">{{ message }}</div>
	{% endif %}

	<form action="index.php?controleur=utilisateur&methode=verifInscription" method="POST" class="text-center col-12 col-md-6 col-lg-4 mx-auto my-auto p-4">
		<div class="bg-mydark rounded">
			<h3 class="mb-3 fw-bold">Inscription</h3>

			{% if erreurs is defined %}
				<div class="alert alert-danger">
				<h3>Erreurs :</h3>
					<ul>
						{% for erreur in erreurs %}
							<li>{{ erreur }}</li>
						{% endfor %}
					</ul>
				</div>
			{% endif %}

			<div class="form-group mb-3">
				<label for="pseudo" class="d-block text-start mb-0">Pseudo</label>
				<input type="text" name="pseudo" id="pseudo" class="form-control" placeholder="Pseudo" required>
				<small id="pseudoErreur" class="text-danger"></small>

			</div>

			<div class="form-group mb-3">
				<label for="prenom" class="d-block text-start mb-0">Date de naissance</label>
				<input type="date" name="dateNaiss" id="dateNaiss" class="form-control" required>
				<small id="dateNaissErreur" class="text-danger"></small>
			</div>
			<div class="form-group mb-3">
				<label for="mail" class="d-block text-start mb-0">Mail</label>
				<input type="email" name="mail" id="mail" class="form-control" placeholder="mail@mail.fr" required>
				<small id="mailErreur" class="text-danger"></small>
			</div>

			<div class="form-group mb-3">
				<label for="mdp" class="d-block text-start mb-0">Mot de passe</label>
				<input type="password" name="mdp" id="mdp" class="form-control" placeholder="Entrez votre mot de passe" required>
				<small id="mdpErreur" class="text-danger"></small>
			</div>

			<div class="form-group mb-4">
				<label for="mdpVerif" class="d-block text-start mb-0">Vérification mot de passe</label>
				<input type="password" name="mdpVerif" id="mdpVerif" class="form-control" placeholder="Confirmez votre mot de passe" required>
				<small id="mdpVerifErreur" class="text-danger"></small>
			</div>

			<input type="hidden" name="currentUrl" id="currentUrl">

			<input type="submit" class="btn btn-primary" value="Créer le compte" id="boutonInscription">
		</div>

		<div class="mt-3">
			<a href="index.php?controleur=utilisateur&methode=connexion">Se connecter</a>
		</div>
	</form>
{% block javascripts %}
	<script src="js/formInscription.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Récupérer l'URL actuelle
        let currentUrl = window.location.href;

        // Insérer l'URL dans le champ caché
        document.getElementById('currentUrl').value = currentUrl;
    });
</script>
{% endblock %}

{% endblock %}
