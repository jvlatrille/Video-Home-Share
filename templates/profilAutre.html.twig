{% extends 'base_template.html.twig' %}

{% block content2 %}

	{% if utilisateur is defined %}
		{% set banniere = 'img/banniere/' ~ utilisateur.banniereProfil ?? '../img/turtleTestBanniere.png' %}
		{% set photo = 'img/profils/' ~ utilisateur.photoProfil ?? 'img/tortueProfil.png' %}

		<div class="container-fluid p-0">
			<div class="position-relative" style="height: 30vh;">
				<img src="{{ banniere }}" class="img-fluid w-100 h-100" style="object-fit: cover;">
				<div class="position-absolute top-50 start-20 translate-middle-y ms-5">
					<img src="{{ photo }}" class="rounded-circle border border-white" style="height: 150px; width: 150px; object-fit: cover;">
				</div>
			</div>
		</div>

		<div class="text-center mt-3">
			<h2>{{ utilisateur.pseudo }}</h2>
			<p class="text-muted">Grade :
				{{ utilisateur.role | capitalize }}</p>
		</div>
		<div class="text-center mt-3">
			<p>"{{ utilisateur.bio }}"</p>
		</div>

		<div class="container mt-4">
			<h2>Messages de {{ utilisateur.pseudo }}</h2>
			{% if messages is empty %}
				<p class="text-center">Cet utilisateur n'a pas encore envoyé de messages.</p>
			{% else %}
				<div class="container">
					{% for message in messages %}
						<h5><strong>Dans le forum : {{ message.forumNom }}</strong></h5>
						<div class="card mb-4">
							<div class="card-body">
								<div class="d-flex align-items-center">
									<!-- Affichage de la photo de profil -->
									<div class="rounded-circle" 
										style="background-image: url('{{ photo }}');
										height: 70px;
										width: 70px;
										background-size: cover;
										background-position: center;
										border: 4px solid #fff;">
									</div>
									
									<!-- Contenu du message -->
									<div class="ml-3">
										<p>{{ message.contenu }}</p>
									</div>
								</div>
							</div>
		
							<!-- Pied de la carte (likes/dislikes) -->
							<div class="card-footer d-flex justify-content-between align-items-center">
								<div>
									<button type="button" class="btn btn-success btn-sm">👍 {{ message.nbLike }}</button>
									<button type="button" class="btn btn-danger btn-sm">👎 {{ message.nbDislike }}</button>
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
			{% endif %}
		</div>		
	{% endif %}
{% endblock %}
