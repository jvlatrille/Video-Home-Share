{% extends 'base_template.html.twig' %}

{% block content %}
    <title>Bienvenue sur {{ constant("WEBSITE_TITLE") }}</title>

    {% if oaListe is empty %}
        <p class="text-center mt-5">Aucun film disponible pour le moment.</p>
    {% else %}
        <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">

            <!-- Indicateurs -->
            <div class="carousel-indicators">
                {% for i in 0..(oaListe|slice(0, 10)|length - 1) %}
                    <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="{{ i }}" {% if i == 0 %} class="active"{% endif %} aria-label="Slide {{ i + 1 }}"></button>
                {% endfor %}
            </div>

            <!-- Contenu du carrousel -->
            <div class="carousel-inner">
                {% for oa in oaListe|slice(0, 10) %}
                    <div class="carousel-item {% if loop.index0 == 0 %}active{% endif %}">
                        <div class="container py-4">
                            <div class="row align-items-center justify-content-center">
                                <!-- Affiche du film -->
                                <div class="col-md-4 text-center">
                                    {% if oa.posterPath %}
                                        <img src="{{ oa.posterPath }}" alt="Affiche de {{ oa.nom }}" class="img-fluid rounded" style="max-height: 400px; object-fit: cover;">
                                    {% else %}
                                        <p><em>Affiche non disponible</em></p>
                                    {% endif %}
                                </div>
                                <!-- Détails du film -->
                                <div class="col-md-6 px-4 text-center">
                                    <h2 class="text-uppercase" style="color: #5c3d1e; font-size: 2rem; font-weight: bold;">{{ oa.nom }}</h2>
                                    <p><strong>Date de sortie :</strong> {{ oa.dateSortie }}</p>
                                    <p><strong>Genre :</strong> {{ oa.genres|join(', ') }}</p>
                                    <p class="text-muted" style="max-width: 500px;">{{ oa.description|slice(0, 200) }}...</p>
                                    <p><strong>Note :</strong>
                                        {% for i in 1..5 %}
                                            {% if i <= (oa.note / 2) %}
                                                <img src="{{ 'img/noteRemplie.png' }}" alt="Note remplie" width="30" height="30">
                                            {% else %}
                                                <img src="{{ 'img/noteVide.png' }}" alt="Note vide" width="30" height="30">
                                            {% endif %}
                                        {% endfor %}
                                    </p>
                                    <a href="index.php?controleur=oa&methode=afficherFilm&idOa={{ oa.idOa }}" class="btn mt-2" style="background-color: #b12a2a; color: #fff;">Voir plus</a>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- Contrôles du carrousel -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Précédent</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Suivant</span>
            </button>
			<!-- Rend les flèches noires -->
			<style>
				.carousel-control-prev-icon,
				.carousel-control-next-icon {
					filter: invert(1);
				}
			</style>
        </div>
    {% endif %}
{% endblock %}
